.row.justify-content-center
  .col-md-6
    .card.shadow-sm
      .card-body
        %h3.card-title.mb-3 Edycja profilu

        - if resource.errors.any?
          .alert.alert-danger
            %h6.mb-2 Wystąpiły błędy:
            %ul.mb-0
              - resource.errors.full_messages.each do |msg|
                %li= msg

        = form_with model: resource,
                    as: resource_name,
                    url: registration_path(resource_name),
                    html: { method: :put },
                    local: true do |f|

          .mb-3
            = f.label :email, class: "form-label"
            = f.email_field :email, class: "form-control", autofocus: true

          - if devise_mapping.confirmable? && resource.pending_reconfirmation?
            .alert.alert-warning
              Na Twój adres email wysłano link potwierdzający zmianę adresu.

          .mb-3
            = f.label :password, "Nowe hasło", class: "form-label"
            %small.text-muted
              (pozostaw puste, jeśli nie chcesz zmieniać)
            = f.password_field :password, autocomplete: "new-password", class: "form-control"

          .mb-3
            = f.label :password_confirmation, "Potwierdź nowe hasło", class: "form-label"
            = f.password_field :password_confirmation, autocomplete: "new-password", class: "form-control"

          .mb-3
            = f.label :current_password, "Aktualne hasło", class: "form-label"
            %small.text-muted
              (wymagane przy zmianie hasła lub emaila)
            = f.password_field :current_password, autocomplete: "current-password", class: "form-control"

          = f.submit "Zapisz zmiany", class: "btn btn-primary w-100 mt-2"

        %hr

        .d-flex.justify-content-between.align-items-center
          %div
            = link_to "Powrót do profilu", profile_path, class: "btn btn-outline-secondary btn-sm"
          %div
            = button_to "Usuń konto",
                        registration_path(resource_name),
                        method: :delete,
                        form: { data: { turbo_confirm: "Na pewno usunąć konto?" } },
                        class: "btn btn-outline-danger btn-sm"

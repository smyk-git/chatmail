!!! 5
%html
  %head
    %title Chatmail
    %meta{ name: "viewport", content: "width=device-width,initial-scale=1" }
    = csrf_meta_tags
    = csp_meta_tag

    / Bootstrap CSS z CDN
    %link{ rel: "stylesheet",
           href: "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" }

    / Twoje style z asset pipeline (app/assets/stylesheets/application.css / .sass)
    = stylesheet_link_tag "application", "data-turbo-track": "reload"

    / Importmap â€“ tu wejdzie Action Cable, Turbo, itp.
    = javascript_importmap_tags

  %body{ data: (user_signed_in? ? { current_user_id: current_user.id } : {}) }
    %nav.navbar.navbar-expand-lg.navbar-dark.bg-dark
      .container
        = link_to "Chatmail", root_path, class: "navbar-brand"
        %ul.navbar-nav.ms-auto
          - if user_signed_in?
            %li.nav-item
              = link_to "Profil", profile_path, class: "btn btn-outline-info   btn-sm ms-2"
            %li.nav-item
              = button_to "Wyloguj",
                destroy_user_session_path,
                method: :delete,
                form_class: "d-inline",
                class: "btn btn-outline-danger btn-sm ms-2"
          - else
            %li.nav-item
              = link_to "Zaloguj", new_user_session_path, class: "nav-link"
            %li.nav-item
              = link_to "Rejestracja", new_user_registration_path, class: "nav-link"

    .container.mt-4
      - if notice
        .alert.alert-info= notice
      - if alert
        .alert.alert-danger= alert

      = yield

      / Bootstrap JS (bundle zawiera Popper)
      %script{ src: "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js", defer: true }
